<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /**
     * @author Shirdrn
     */
    function XMLDoc(){}; // 定义一个XMLDoc类
    XMLDoc.prototype.xmlFile = ""; // xmlFile为XMLDoc的一个成员，是指“.xml”文件
    XMLDoc.prototype.parseXMLDoc = function(){ // 加载解析XML文件的成员方法
        var docParser;
        if(window.ActiveXObject) { // IE浏览器支持
            docParser = new ActiveXObject("Microsoft.XMLDOM");
            docParser.async = "false";
            docParser.load(this.xmlFile);
            return docParser;
        }else if(window.XMLHttpRequest){
           // docParser = new XMLHttpRequest();
            var xmlhttp = new window.XMLHttpRequest();
            xmlhttp.open("GET",this.xmlFile,false);
            xmlhttp.send(null);
            if(xmlhttp.readyState == 4){
                docParser = xmlhttp.responseXML.documentElement;
            }
            return docParser;
        }
        else if(window.DOMParser) { // Mozillia浏览器支持
            docParser = new DOMParser()
            return docParser.parseFromString(this.xmlFile,"text/xml");
        }
        else { // 如果不是IE和Mozillia和谷歌浏览器则无法解析，返回false。
            return false;
        }
    }


    XMLDoc.prototype.printFigure = function() { // 打印输出读取的XML文件的内容信息
        var xmlDoc = this.parseXMLDoc(); // 调用成员方法parseXMLDoc()加载解析XML文件
        var users = xmlDoc.getElementsByTagName("Figure"); // 获取指定标签名称的数据的一个数组users

        for(var i=0 ; i<users.length ; i++) { // 双重循环迭代输出
            document.write("<B>Figure的第" + (i+1) + "条记录信息：</B><BR>");
            var ID=users[i].getElementsByTagName("ID")[0].firstChild.nodeValue;
            var figureName=users[i].getElementsByTagName("figureName")[0].firstChild.nodeValue;
            var type=users[i].getElementsByTagName("type")[0].firstChild.nodeValue;
            document.write("ID= " + ID + "<BR>");
            document.write("figureName = " + figureName + "<BR>");
            document.write("type = " + type + "<BR>");

            document.write("Attributes:"+ "<BR>");
            var entry=users[i].getElementsByTagName("Attribute");
            for(var k=0;k<entry.length;k++){
                document.write("  Attribute-"+ (k+1) +  ":<BR>");
                var dataType = entry[k].getElementsByTagName("dataType")[0].firstChild.nodeValue;
                document.write(  "    dataType = " + dataType + "<BR>");
                var  id= entry[k].getElementsByTagName("id")[0].firstChild.nodeValue;
                document.write(  "    id= " +  id+ "<BR>");
                var isForeign = entry[k].getElementsByTagName("isForeign")[0].firstChild.nodeValue;
                document.write(  "    isForeign= " +  isForeign+ "<BR>");
                var  isPrimary= entry[k].getElementsByTagName("isPrimary")[0].firstChild.nodeValue;
                document.write(  "    isPrimary= " + isPrimary + "<BR>");
                var  isRequired= entry[k].getElementsByTagName("isRequired")[0].firstChild.nodeValue;
                document.write(  "    isRequired= " +  isRequired+ "<BR>");
                var  jgStatus= entry[k].getElementsByTagName("jgStatus")[0].firstChild.nodeValue;
                document.write(  "    jgStatus= " + jgStatus + "<BR>");
                var  jgTime= entry[k].getElementsByTagName("jgTime")[0].firstChild.nodeValue;
                document.write(  "    jgTime= " +jgTime  + "<BR>");
                var  name= entry[k].getElementsByTagName("name")[0].firstChild.nodeValue;
                document.write(  "    name= " + name + "<BR>");
                var  status= entry[k].getElementsByTagName("status")[0].firstChild.nodeValue;
                document.write(  "    status= " +  status+ "<BR>");
            }

        }
    }
    XMLDoc.prototype.printInheritanceLink = function() { // 打印输出读取的XML文件的内容信息
        var xmlDoc = this.parseXMLDoc(); // 调用成员方法parseXMLDoc()加载解析XML文件
        var users = xmlDoc.getElementsByTagName("inheritanceLink"); // 获取指定标签名称的数据的一个数组users

        for(var i=0 ; i<users.length ; i++) { // 双重循环迭代输出
            document.write("<B>InheritanceLink的第" + (i+1) + "条记录信息：</B><BR>");
            var ID=users[i].getElementsByTagName("ID")[0].firstChild.nodeValue;
            var startFigureId=users[i].getElementsByTagName("startFigureId")[0].firstChild.nodeValue;
            var endFigureId=users[i].getElementsByTagName("endFigureId")[0].firstChild.nodeValue;
            document.write("ID= " + ID + "<BR>");
            document.write("startFigureId = " + startFigureId + "<BR>");
            document.write("endFigureId = " + endFigureId + "<BR>");



        }
    }
    XMLDoc.prototype.printRelationship = function() { // 打印输出读取的XML文件的内容信息
        var xmlDoc = this.parseXMLDoc(); // 调用成员方法parseXMLDoc()加载解析XML文件
        var users = xmlDoc.getElementsByTagName("relationship"); // 获取指定标签名称的数据的一个数组users

        for(var i=0 ; i<users.length ; i++) { // 双重循环迭代输出
            document.write("<B>relationship的第" + (i+1) + "条记录信息：</B><BR>");
            var ID=users[i].getElementsByTagName("ID")[0].firstChild.nodeValue;
            var startFigureId=users[i].getElementsByTagName("startFigureId")[0].firstChild.nodeValue;
            var endFigureId=users[i].getElementsByTagName("endFigureId")[0].firstChild.nodeValue;
            document.write("ID= " + ID + "<BR>");
            document.write("startFigureId = " + startFigureId + "<BR>");
            document.write("endFigureId = " + endFigureId + "<BR>");



        }
    }
    var xmlDoc = new XMLDoc(); // 创建一个XMLDoc了IDE对象实例
    xmlDoc.xmlFile = "out.xml"; // 设置对象实例的成员变量的数据
    xmlDoc.printFigure(); // 打印输出
    xmlDoc.printInheritanceLink();
    xmlDoc.printRelationship();
</script>
</body>
</html>